/**
 * a flexible, generic modal service
 * @version v0.1.0
 * @link 
 * @author One Acre Fund <devs@oneacrefund.org>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(n){"use strict";n.module("ngGenericModal",["ui.bootstrap"]).controller("genericModalController",["$scope","$uibModalInstance","$uibModalStack",function(n,o,t){n.instance=o,n.continue=function(){o.close(),o.options.continueCallback(o),t.dismissAll()},n.cancel=function(){o.dismiss(),o.options.cancelCallback(o),t.dismissAll()}}]).factory("genericModal",["$uibModal","$q","$templateCache",function(n,o,t){function e(o,e,c){var a={showContinue:!0,showCancel:!1,userName:void 0,cancellableBackdrop:!0,continueButton:"OK",cancelButton:"Cancel",continueClasses:"",cancelClasses:"",htmlBody:!1,errorIcon:!1,successIcon:!1,icon:void 0,iconClasses:void 0,continueCallback:function(){},cancelCallback:function(){}};(c=Object.assign({},a,c)).errorIcon&&(c.icon="times-circle",c.iconClasses="text-danger"),c.successIcon&&(c.icon="check-circle",c.iconClasses="text-success"),c.__isHtmlFile=e.endsWith(".html")||e.endsWith(".cshtml"),console.log(i);var l=n.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",template:t.get("modal.html"),controller:"genericModalController",controllerAs:"modal",backdrop:!!c.cancellableBackdrop||"static"});console.log(l),l.modalTitle=o,l.modalBody=e,l.options=c}var i=t.get("modal.html");return{openModal:function(n,o,t,i,c){e(n,o,{showContinue:t,showCancel:i,cancellableBackdrop:c})},open:e,asyncOpen:function(n,t,i){i=i||{};var c=o.defer();return i.continueCallback=function(){c.resolve()},i.cancelCallback=function(){c.reject()},e(n,t,i),c.promise}}}]).run(["$templateCache",function(n){n.put("modal.html","<div class='modal-header modal-border'><p ng-if='instance.options.userName'><i class='fa fa-user'> {{instance.options.userName}}</i></p><h3 class='modal-title' id='modal-title'><span ng-if='instance.options.icon'><i class='fa fa-{{instance.options.icon}} {{instance.options.iconClasses}}'></i> </span>{{instance.modalTitle}}</h3></div><div class='modal-body' id='modal-body'><div ng-if='!instance.options.htmlBody && !instance.options.__isHtmlFile'>{{instance.modalBody}}</div><ng-bind-html ng-if='instance.options.htmlBody && !instance.options.__isHtmlFile' ng-bind-html='instance.modalBody'></ng-bind-html><ng-include ng-if='instance.options.__isHtmlFile' src='instance.modalBody'></ng-include></div><div class='modal-footer'><button ng-if='instance.options.showContinue' class='btn btn-modal {{instance.options.continueClasses}}' type='button' ng-click='continue()'>{{instance.options.continueButton}}</button><button ng-if='instance.options.showCancel' class='btn btn-modal {{instance.options.cancelClasses}}' type='button' ng-click='cancel()'>{{instance.options.cancelButton}}</button></div>")}])}(angular);