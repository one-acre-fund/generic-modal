/**
 * a flexible, generic modal service
 * @version v0.1.0
 * @link 
 * @author One Acre Fund <devs@oneacrefund.org>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(n){"use strict";n.module("ngGenericModal",["ui.bootstrap"]).controller("genericModalController",["$scope","$uibModalInstance","$uibModalStack",function(n,o,t){n.instance=o,n.continue=function(){o.close(),o.options.continueCallback(o),t.dismissAll()},n.cancel=function(){o.dismiss(),o.options.cancelCallback(o),t.dismissAll()}}]).factory("genericModal",["$uibModal","$q","$templateCache",function(n,o,t){function c(o,c,i){var e={showContinue:!0,showCancel:!1,cancellableBackdrop:!0,continueButton:"OK",cancelButton:"Cancel",continueClasses:"",cancelClasses:"",htmlBody:!1,errorIcon:!1,successIcon:!1,icon:void 0,iconClasses:void 0,continueCallback:function(){},cancelCallback:function(){}};(i=Object.assign({},e,i)).errorIcon&&(i.icon="times-circle",i.iconClasses="text-danger"),i.successIcon&&(i.icon="check-circle",i.iconClasses="text-success"),console.log(i.icon),console.log(i.iconClasses),i.__isHtmlFile=c.endsWith(".html")||c.endsWith(".cshtml");var l=n.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",template:t.get("modal.html"),controller:"genericModalController",controllerAs:"modal",backdrop:!!i.cancellableBackdrop||"static"});l.modalTitle=o,l.modalBody=c,l.options=i}return t.get("modal.html"),{open:c,asyncOpen:function(n,t,i){i=i||{};var e=o.defer();return i.continueCallback=function(){e.resolve()},i.cancelCallback=function(){e.reject()},c(n,t,i),e.promise}}}]).run(["$templateCache",function(n){n.put("modal.html","<div class='modal-header modal-border'><h3 class='modal-title' id='modal-title'><span ng-if='instance.options.icon'><i class='fa fa-{{instance.options.icon}} {{instance.options.iconClasses}}'></i> </span>{{instance.modalTitle}}</h3></div><div class='modal-body' id='modal-body'><div ng-if='!instance.options.htmlBody && !instance.options.__isHtmlFile'>{{instance.modalBody}}</div><ng-bind-html ng-if='instance.options.htmlBody && !instance.options.__isHtmlFile' ng-bind-html='instance.modalBody | to_trusted'></ng-bind-html><ng-include ng-if='instance.options.__isHtmlFile' src='instance.modalBody'></ng-include></div><div class='modal-footer'><button ng-if='instance.options.showContinue' class='btn btn-modal {{instance.options.continueClasses}}' type='button' ng-click='continue()'>{{instance.options.continueButton}}</button><button ng-if='instance.options.showCancel' class='btn btn-modal {{instance.options.cancelClasses}}' type='button' ng-click='cancel()'>{{instance.options.cancelButton}}</button></div>")}]).filter("to_trusted",["$sce",function(n){return function(o){return n.trustAsHtml(o)}}])}(angular);