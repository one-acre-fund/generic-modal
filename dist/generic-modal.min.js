/**
 * a flexible, generic modal service
 * @version v0.1.0
 * @link 
 * @author One Acre Fund <devs@oneacrefund.org>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(n){"use strict";n.module("ngGenericModal",["ui.bootstrap"]).controller("genericModalController",["$scope","$uibModalInstance","$uibModalStack",function(n,t,o){n.instance=t,n.continue=function(){t.close(),t.options.continueCallback(t),o.dismissAll()},n.cancel=function(){t.dismiss(),t.options.cancelCallback(t),o.dismissAll()}}]).factory("genericModal",["$uibModal","$q","$templateCache",function(n,t,o){function i(t,i,c){var e={showContinue:!0,showCancel:!1,cancellableBackdrop:!0,continueButton:"OK",cancelButton:"Cancel",continueClasses:"",cancelClasses:"",htmlBody:!1,errorIcon:!1,successIcon:!1,icon:void 0,iconClasses:void 0,continueCallback:function(){},cancelCallback:function(){}};(c=Object.assign({},e,c)).errorIcon&&(c.icon="times-circle",c.iconClasses="text-danger"),c.successIcon&&(c.icon="check-circle",c.iconClasses="text-success"),c.__isHtmlFile=i.endsWith(".html")||i.endsWith(".cshtml");var l=n.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",template:o.get("modal.html"),controller:"genericModalController",controllerAs:"modal",backdrop:!!c.cancellableBackdrop||"static"});l.modalTitle=t,l.modalBody=i,l.options=c}return o.get("modal.html"),{open:i,asyncOpen:function(n,o,c){c=c||{};var e=t.defer();return c.continueCallback=function(){e.resolve()},c.cancelCallback=function(){e.reject()},i(n,o,c),e.promise}}}]).run(["$templateCache",function(n){n.put("modal.html","<div class='modal-header modal-border'><h3 class='modal-title' id='modal-title'><span ng-if='instance.options.icon'><i class='fa fa-{{instance.options.icon}} {{instance.options.iconClasses}}'></i> </span>{{instance.modalTitle}}</h3></div><div class='modal-body' id='modal-body'><div ng-if='!instance.options.htmlBody && !instance.options.__isHtmlFile'>{{instance.modalBody}}</div><ng-bind-html ng-if='instance.options.htmlBody && !instance.options.__isHtmlFile' ng-bind-html='instance.modalBody | to_trusted'></ng-bind-html><ng-include ng-if='instance.options.__isHtmlFile' src='instance.modalBody'></ng-include></div><div class='modal-footer'><button ng-if='instance.options.showContinue' class='btn btn-modal {{instance.options.continueClasses}}' type='button' ng-click='continue()'>{{instance.options.continueButton}}</button><button ng-if='instance.options.showCancel' class='btn btn-modal {{instance.options.cancelClasses}}' type='button' ng-click='cancel()'>{{instance.options.cancelButton}}</button></div>")}]).filter("to_trusted",["$sce",function(n){return function(t){return n.trustAsHtml(t)}}])}(angular);